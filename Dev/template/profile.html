{% extends 'base.html' %}
{% load static %}
{% block title %}Profile| {% endblock %}

{% block content %}
<section class="hero container">
  <img class="hero__img" src="/{{ profile.image }}" onerror="this.src=`{% static 'images/dpplaceholder.png' %}` ;"  alt="Profile picture" />
  <!-- <h2 class="hero__subtitle">Hi, I'm Dev ðŸ‘‹</h2> -->
  <h1 class="hero__title">
    {% if profile.full_name%}
      {{ profile.full_name }}
    {% else %}
      {{ profile.user.username|title }}
    {% endif %}
  </h1>
  <h2 class="hero__subtitle">@{{ profile.user.username }}</h2>
  <!-- <a class="hero__btn btn" href="{%url 'signup'%}">Join Now</a> -->
  <div class="follow__count">
    <a style="text-decoration: none; color: var(--clr-light);" href="{% url 'profilee' profile.user %}">
      <div class="posts__count">
        <h3 class="">Posts</h3>
        {{post_count}}
      </div>
    </a>
    <div class="tweets__count">
      <h3 class="">Thoughts</h3>
      {{tweet_count}}
    </div>
    <div class="followers__count">
      <h3 class="">Followers</h3>
      {{follower_count|add:"-1"}}
      <!-- {% for i in profile.following.all %}
        <p>{{i}}</p>
        {% endfor %}   -->
    </div>
    <div class="following__count">
      <h3 class="">Following</h3>
      {{following_count|add:"-1"}}
    </div>
    <a style="text-decoration: none; color: var(--clr-light);" href="{% url 'savedd' profile.user %}">
      <div class="saved__count">
        <h3 class="">Saved</h3>
        {{ profile.saved.count }}
      </div>
    </a>
  </div>
  {% if profile.user == request.user %}
    <a class="btn"  href="{% url 'editprofile' %}">Edit Profile</a>
  {% endif %}
  {% if profile.user != request.user %}
  <div class="follow__button">
    {% if follow_status == True %}
      <div>
        <a class="btn"  href="{% url 'follow' profile.user 0 %}">Unfollow</a>
      </div>
    {% else %}  
      <div>
      <a class="btn"  href="{% url 'follow' profile.user 1 %}">Follow</a>
      </div>
    {% endif %}
    <div>
      <a class="btn"  href="{% url 'link' profile.user.id %}">Message</a>
    </div>
  </div>
{% endif %}
    <p class="featured__description profile__bio">
      <!-- <strong><b>Bio</b></strong><br> -->
      {{ profile.bio }}
    </p>
    <!-- <div class="profile-links">
      <a href="{% url 'profilee' profile.user %}" class="{% if url_name == 'profilee' %}active-link{% endif %}">Posts</a>
      <a href="{% url 'savedd' profile.user %}" class="{% if url_name == 'savedd' %}active-link{% endif %}">Saved</a>
    </div> -->
    <div class="featured__img-container">
      {% for post in posts %}
        <div class="">
          <a href="{{ post.get_absolute_url }}">
            {% if post.picture %}
              <img class="" src="{{ post.picture.url }}" alt="">
            {% else %}
              <video src="{{ post.video }}"></video>
            {% endif %}
          </a>
        </div>
      {% endfor %}
    </div>
    <br>
    <br>
    </section>
    <!-- <script>
      let heroimg = document.getElementById("heroimg")
      heroimg.onerror = function(){
        heroimg.src="{% static 'images/dpplaceholder.png'%}";
      }
</script> -->
{% endblock %}